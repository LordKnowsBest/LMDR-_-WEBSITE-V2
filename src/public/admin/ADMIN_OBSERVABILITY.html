<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover"/>
    <title>VelocityMatch Admin - Observability</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

    <!-- Tailwind CDN + inline config -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace']
                    },
                    colors: {
                        surface: { dark: '#1a1f2e', darker: '#141824', light: '#f8fafc' },
                        border: { dark: '#2d3548', light: '#e2e8f0' },
                        text: { muted: '#8892a6', light: '#64748b' },
                        brand: { blue: '#3b82f6', purple: '#8b5cf6', teal: '#14b8a6' }
                    }
                }
            }
        };
    </script>

    <!-- External CSS via CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/LordKnowsBest/LMDR-_-WEBSITE-V2@main/src/public/admin/css/admin-observability.css"/>
</head>
<body class="bg-surface-darker min-h-screen text-gray-100">
    <!-- Header -->
    <header class="bg-surface-dark border-b border-border-dark px-6 py-4 sticky top-0 z-50">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-brand-blue to-brand-purple flex items-center justify-center">
                    <i class="fas fa-chart-line text-white"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-white">System Observability</h1>
                    <p class="text-sm text-text-muted">Real-time system monitoring and debugging</p>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <label class="flex items-center space-x-2 text-sm text-text-muted cursor-pointer">
                    <input type="checkbox" id="autoRefresh" class="rounded text-brand-blue focus:ring-brand-blue" checked>
                    <span>Auto-refresh (30s)</span>
                </label>
                <div id="systemHealth" class="flex items-center space-x-2 px-4 py-2 bg-green-500/10 border border-green-500/30 rounded-lg">
                    <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                    <span class="text-sm font-medium text-green-400">System Healthy</span>
                </div>
                <button id="themeToggle" class="p-2 rounded-lg hover:bg-white/10 transition-colors" title="Toggle theme">
                    <i class="fas fa-moon text-text-muted"></i>
                </button>
                <a href="/admin-dashboard" class="text-text-muted hover:text-white transition-colors">
                    <i class="fas fa-arrow-left mr-2"></i>Dashboard
                </a>
            </div>
        </div>
    </header>

    <!-- Tabs -->
    <nav class="bg-surface-dark border-b border-border-dark px-6">
        <div class="flex space-x-2 py-2">
            <button class="tab-btn active px-4 py-2 rounded-lg text-sm font-medium" data-tab="overview">
                <i class="fas fa-tachometer-alt mr-2"></i>Overview
            </button>
            <button class="tab-btn px-4 py-2 rounded-lg text-sm font-medium text-text-muted hover:text-white" data-tab="logs">
                <i class="fas fa-list mr-2"></i>Logs
            </button>
            <button class="tab-btn px-4 py-2 rounded-lg text-sm font-medium text-text-muted hover:text-white" data-tab="errors">
                <i class="fas fa-exclamation-triangle mr-2"></i>Errors
            </button>
            <button class="tab-btn px-4 py-2 rounded-lg text-sm font-medium text-text-muted hover:text-white" data-tab="traces">
                <i class="fas fa-project-diagram mr-2"></i>Traces
            </button>
            <button class="tab-btn px-4 py-2 rounded-lg text-sm font-medium text-text-muted hover:text-white" data-tab="ai">
                <i class="fas fa-robot mr-2"></i>AI Analytics
            </button>
            <button class="tab-btn px-4 py-2 rounded-lg text-sm font-medium text-text-muted hover:text-white" data-tab="agents">
                <i class="fas fa-user-gear mr-2"></i>Agent Behavior
            </button>
            <button class="tab-btn px-4 py-2 rounded-lg text-sm font-medium text-text-muted hover:text-white" data-tab="anomalies">
                <i class="fas fa-microscope mr-2"></i>Anomalies
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="p-6">
        <!-- Overview Tab -->
        <div id="tab-overview" class="tab-content">
            <div id="activeAnomalyBanner" class="hidden mb-8"></div>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-text-muted text-sm">Total Requests</span>
                        <div class="w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center"><i class="fas fa-server text-blue-400"></i></div>
                    </div>
                    <div id="metricRequests" class="text-3xl font-bold text-white">--</div>
                    <div class="text-xs text-text-muted mt-1">Last hour</div>
                </div>
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-text-muted text-sm">Error Rate</span>
                        <div class="w-10 h-10 rounded-lg bg-red-500/20 flex items-center justify-center"><i class="fas fa-bug text-red-400"></i></div>
                    </div>
                    <div id="metricErrorRate" class="text-3xl font-bold text-white">--</div>
                    <div class="text-xs text-text-muted mt-1">Last hour</div>
                </div>
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-text-muted text-sm">Avg Latency</span>
                        <div class="w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center"><i class="fas fa-clock text-purple-400"></i></div>
                    </div>
                    <div id="metricLatency" class="text-3xl font-bold text-white">--</div>
                    <div class="text-xs text-text-muted mt-1">Last hour</div>
                </div>
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-text-muted text-sm">Total Errors</span>
                        <div class="w-10 h-10 rounded-lg bg-amber-500/20 flex items-center justify-center"><i class="fas fa-exclamation text-amber-400"></i></div>
                    </div>
                    <div id="metricErrors" class="text-3xl font-bold text-white">--</div>
                    <div class="text-xs text-text-muted mt-1">Last hour</div>
                </div>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                    <h2 class="text-lg font-semibold text-white mb-4">Service Health</h2>
                    <div id="serviceHealthList" class="space-y-3"><div class="text-text-muted text-center py-8">Loading...</div></div>
                </div>
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                    <h2 class="text-lg font-semibold text-white mb-4">Errors by Hour</h2>
                    <div id="errorsByHourChart" class="h-48 flex items-end justify-between space-x-1"><div class="text-text-muted text-center py-8 w-full">Loading...</div></div>
                </div>
            </div>
            <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-semibold text-white">Recent Errors</h2>
                    <button class="text-sm text-brand-blue hover:underline" onclick="switchTab('errors')">View all</button>
                </div>
                <div id="recentErrorsList" class="space-y-3"><div class="text-text-muted text-center py-8">Loading...</div></div>
            </div>
        </div>

        <!-- Logs Tab -->
        <div id="tab-logs" class="tab-content hidden">
            <div class="bg-surface-dark rounded-xl p-4 border border-border-dark mb-6">
                <div class="flex flex-wrap items-center gap-4">
                    <div class="flex-1 min-w-[200px]">
                        <input type="text" id="logSearch" placeholder="Search logs..."
                            class="w-full px-4 py-2 bg-surface-darker border border-border-dark rounded-lg text-white placeholder-text-muted focus:border-brand-blue focus:outline-none">
                    </div>
                    <select id="logLevel" class="px-4 py-2 bg-surface-darker border border-border-dark rounded-lg text-white focus:border-brand-blue focus:outline-none">
                        <option value="">All Levels</option>
                        <option value="DEBUG">DEBUG</option><option value="INFO">INFO</option>
                        <option value="WARN">WARN</option><option value="ERROR">ERROR</option><option value="CRITICAL">CRITICAL</option>
                    </select>
                    <select id="logSource" class="px-4 py-2 bg-surface-darker border border-border-dark rounded-lg text-white focus:border-brand-blue focus:outline-none">
                        <option value="">All Sources</option>
                    </select>
                    <input type="date" id="logDate" class="px-4 py-2 bg-surface-darker border border-border-dark rounded-lg text-white focus:border-brand-blue focus:outline-none">
                    <button id="applyLogFilters" class="px-4 py-2 bg-brand-blue text-white rounded-lg hover:bg-blue-600 transition-colors"><i class="fas fa-filter mr-2"></i>Apply</button>
                    <button id="clearLogFilters" class="px-4 py-2 border border-border-dark text-text-muted rounded-lg hover:bg-white/10 transition-colors">Clear</button>
                </div>
            </div>
            <div class="bg-surface-dark rounded-xl border border-border-dark overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-surface-darker">
                            <tr class="text-left text-sm text-text-muted">
                                <th class="px-4 py-3 font-medium">Timestamp</th><th class="px-4 py-3 font-medium">Level</th>
                                <th class="px-4 py-3 font-medium">Source</th><th class="px-4 py-3 font-medium">Message</th>
                                <th class="px-4 py-3 font-medium">Duration</th><th class="px-4 py-3 font-medium">Trace</th>
                            </tr>
                        </thead>
                        <tbody id="logsTable"><tr><td colspan="6" class="text-center text-text-muted py-8">Loading...</td></tr></tbody>
                    </table>
                </div>
                <div class="flex items-center justify-between px-4 py-3 border-t border-border-dark">
                    <div id="logsPagination" class="text-sm text-text-muted">Showing 0 of 0</div>
                    <div class="flex space-x-2">
                        <button id="logsPrevBtn" class="px-3 py-1 border border-border-dark text-text-muted rounded hover:bg-white/10 disabled:opacity-50" disabled><i class="fas fa-chevron-left"></i></button>
                        <button id="logsNextBtn" class="px-3 py-1 border border-border-dark text-text-muted rounded hover:bg-white/10 disabled:opacity-50"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Errors Tab -->
        <div id="tab-errors" class="tab-content hidden">
            <div class="flex items-center space-x-4 mb-6">
                <span class="text-text-muted">Period:</span>
                <select id="errorPeriod" class="px-4 py-2 bg-surface-dark border border-border-dark rounded-lg text-white focus:border-brand-blue focus:outline-none">
                    <option value="hour">Last Hour</option><option value="day" selected>Last 24 Hours</option>
                    <option value="week">Last 7 Days</option><option value="month">Last 30 Days</option>
                </select>
                <button id="refreshErrors" class="px-4 py-2 bg-brand-blue text-white rounded-lg hover:bg-blue-600 transition-colors"><i class="fas fa-sync mr-2"></i>Refresh</button>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                <div class="lg:col-span-2 bg-surface-dark rounded-xl p-6 border border-border-dark">
                    <h2 class="text-lg font-semibold text-white mb-4">Errors by Source</h2>
                    <div id="errorsBySource" class="space-y-3"><div class="text-text-muted text-center py-8">Loading...</div></div>
                </div>
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                    <h2 class="text-lg font-semibold text-white mb-4">Error Summary</h2>
                    <div id="errorSummary" class="space-y-4"><div class="text-text-muted text-center py-8">Loading...</div></div>
                </div>
            </div>
            <div class="bg-surface-dark rounded-xl border border-border-dark overflow-hidden">
                <div class="px-6 py-4 border-b border-border-dark"><h2 class="text-lg font-semibold text-white">Error Details</h2></div>
                <div id="errorList" class="divide-y divide-border-dark"><div class="text-text-muted text-center py-8">Loading...</div></div>
            </div>
        </div>

        <!-- Traces Tab -->
        <div id="tab-traces" class="tab-content hidden">
            <div class="bg-surface-dark rounded-xl p-6 border border-border-dark mb-6">
                <h2 class="text-lg font-semibold text-white mb-4">Trace Lookup</h2>
                <div class="flex items-center space-x-4">
                    <input type="text" id="traceIdInput" placeholder="Enter trace ID (e.g., tr_abc123...)"
                        class="flex-1 px-4 py-2 bg-surface-darker border border-border-dark rounded-lg text-white font-mono placeholder-text-muted focus:border-brand-blue focus:outline-none">
                    <button id="lookupTrace" class="px-6 py-2 bg-brand-blue text-white rounded-lg hover:bg-blue-600 transition-colors"><i class="fas fa-search mr-2"></i>Lookup</button>
                </div>
            </div>
            <div id="traceDetails" class="hidden">
                <div class="bg-surface-dark rounded-xl border border-border-dark mb-6">
                    <div class="px-6 py-4 border-b border-border-dark">
                        <div class="flex items-center justify-between">
                            <h2 class="text-lg font-semibold text-white">Trace Details</h2>
                            <button id="closeTrace" class="text-text-muted hover:text-white"><i class="fas fa-times"></i></button>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                            <div><div class="text-text-muted text-sm">Trace ID</div><div id="traceId" class="text-white font-mono text-sm">--</div></div>
                            <div><div class="text-text-muted text-sm">Name</div><div id="traceName" class="text-white">--</div></div>
                            <div><div class="text-text-muted text-sm">Duration</div><div id="traceDuration" class="text-white">--</div></div>
                            <div><div class="text-text-muted text-sm">Status</div><div id="traceStatus" class="text-white">--</div></div>
                        </div>
                        <h3 class="text-white font-medium mb-4">Timeline</h3>
                        <div id="traceTimeline" class="relative pl-8 space-y-4"><div class="text-text-muted">No spans found</div></div>
                    </div>
                </div>
            </div>
            <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                <h2 class="text-lg font-semibold text-white mb-4">How to Use Traces</h2>
                <div class="text-text-muted space-y-2">
                    <p>Traces help you debug the flow of operations across the system:</p>
                    <ul class="list-disc list-inside space-y-1 ml-4">
                        <li>Each trace represents a complete operation (e.g., AI enrichment, matching)</li>
                        <li>Spans show the individual steps within a trace</li>
                        <li>Find trace IDs in error logs or operation outputs</li>
                        <li>Use traces to identify bottlenecks and failures</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- AI Analytics Tab -->
        <div id="tab-ai" class="tab-content hidden">
            <div class="flex items-center space-x-4 mb-6">
                <span class="text-text-muted">Period:</span>
                <select id="aiPeriod" class="px-4 py-2 bg-surface-dark border border-border-dark rounded-lg text-white focus:border-brand-blue focus:outline-none">
                    <option value="hour">Last Hour</option><option value="day" selected>Last 24 Hours</option><option value="week">Last 7 Days</option>
                </select>
                <button id="refreshAI" class="px-4 py-2 bg-brand-blue text-white rounded-lg hover:bg-blue-600 transition-colors"><i class="fas fa-sync mr-2"></i>Refresh</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                    <div class="flex items-center justify-between mb-4"><span class="text-text-muted text-sm">AI Requests</span><div class="w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center"><i class="fas fa-robot text-purple-400"></i></div></div>
                    <div id="aiRequests" class="text-3xl font-bold text-white">--</div>
                </div>
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                    <div class="flex items-center justify-between mb-4"><span class="text-text-muted text-sm">Total Tokens</span><div class="w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center"><i class="fas fa-coins text-blue-400"></i></div></div>
                    <div id="aiTokens" class="text-3xl font-bold text-white">--</div>
                </div>
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                    <div class="flex items-center justify-between mb-4"><span class="text-text-muted text-sm">Total Cost</span><div class="w-10 h-10 rounded-lg bg-green-500/20 flex items-center justify-center"><i class="fas fa-dollar-sign text-green-400"></i></div></div>
                    <div id="aiCost" class="text-3xl font-bold text-white">--</div>
                </div>
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                    <div class="flex items-center justify-between mb-4"><span class="text-text-muted text-sm">Avg Latency</span><div class="w-10 h-10 rounded-lg bg-amber-500/20 flex items-center justify-center"><i class="fas fa-clock text-amber-400"></i></div></div>
                    <div id="aiLatency" class="text-3xl font-bold text-white">--</div>
                </div>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                    <h2 class="text-lg font-semibold text-white mb-4">Usage by Provider</h2>
                    <div id="aiByProvider" class="space-y-3"><div class="text-text-muted text-center py-8">Loading...</div></div>
                </div>
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                    <h2 class="text-lg font-semibold text-white mb-4">Usage by Function</h2>
                    <div id="aiByFunction" class="space-y-3"><div class="text-text-muted text-center py-8">Loading...</div></div>
                </div>
            </div>
        </div>

        <!-- Agent Behavior Tab -->
        <div id="tab-agents" class="tab-content hidden">
            <div class="flex items-center space-x-4 mb-6">
                <span class="text-text-muted">Period:</span>
                <select id="agentPeriod" class="px-4 py-2 bg-surface-dark border border-border-dark rounded-lg text-white focus:border-brand-blue focus:outline-none">
                    <option value="hour">Last Hour</option><option value="day" selected>Last 24 Hours</option>
                    <option value="week">Last 7 Days</option><option value="month">Last 30 Days</option>
                </select>
                <button id="refreshAgentBehavior" class="px-4 py-2 bg-brand-blue text-white rounded-lg hover:bg-blue-600 transition-colors"><i class="fas fa-sync mr-2"></i>Refresh</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark"><div class="text-text-muted text-sm mb-2">Agent Runs</div><div id="agentTotalRuns" class="text-3xl font-bold text-white">--</div></div>
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark"><div class="text-text-muted text-sm mb-2">Agent Events</div><div id="agentTotalEvents" class="text-3xl font-bold text-white">--</div></div>
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark"><div class="text-text-muted text-sm mb-2">Agent Errors</div><div id="agentTotalErrors" class="text-3xl font-bold text-white">--</div></div>
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark"><div class="text-text-muted text-sm mb-2">Avg Run Duration</div><div id="agentAvgRunDuration" class="text-3xl font-bold text-white">--</div></div>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <div class="lg:col-span-2 bg-surface-dark rounded-xl p-6 border border-border-dark">
                    <h2 class="text-lg font-semibold text-white mb-4">Recent Agent Runs</h2>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-surface-darker">
                                <tr class="text-left text-xs text-text-muted uppercase tracking-wider">
                                    <th class="px-4 py-3">Trace</th><th class="px-4 py-3">Source</th><th class="px-4 py-3">Status</th>
                                    <th class="px-4 py-3">Events</th><th class="px-4 py-3">Errors</th><th class="px-4 py-3">Duration</th><th class="px-4 py-3">Last Event</th>
                                </tr>
                            </thead>
                            <tbody id="agentRunsTable" class="divide-y divide-border-dark"><tr><td colspan="7" class="text-center text-text-muted py-8">Loading...</td></tr></tbody>
                        </table>
                    </div>
                </div>
                <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                    <h2 class="text-lg font-semibold text-white mb-4">Events by Source</h2>
                    <div id="agentBySource" class="space-y-3"><div class="text-text-muted text-center py-8">Loading...</div></div>
                </div>
            </div>
            <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                <h2 class="text-lg font-semibold text-white mb-4">Recent Agent Events</h2>
                <div id="agentRecentEvents" class="space-y-2"><div class="text-text-muted text-center py-8">Loading...</div></div>
            </div>
        </div>

        <!-- Anomalies Tab -->
        <div id="tab-anomalies" class="tab-content hidden">
            <div class="bg-surface-dark rounded-xl p-6 border border-border-dark mb-8">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-bold text-white flex items-center gap-2"><i class="fas fa-bell text-red-400"></i>Active Anomalies</h2>
                    <span id="anomalyBadge" class="hidden px-2 py-1 bg-red-500 text-white text-xs font-bold rounded-full">0</span>
                </div>
                <div id="activeAnomaliesList" class="space-y-4">
                    <div class="text-text-muted text-center py-12"><i class="fas fa-check-circle text-4xl mb-3 text-green-500/30"></i><p>No active anomalies detected.</p></div>
                </div>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 space-y-6">
                    <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-lg font-semibold text-white">Detection Rules</h2>
                            <button onclick="AnomalyUI.openAddRule()" class="px-4 py-2 bg-brand-blue text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors"><i class="fas fa-plus mr-2"></i>Add Rule</button>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-surface-darker">
                                    <tr class="text-left text-xs text-text-muted uppercase tracking-wider">
                                        <th class="px-4 py-3">Rule Name</th><th class="px-4 py-3">Type</th><th class="px-4 py-3">Threshold</th><th class="px-4 py-3">Status</th><th class="px-4 py-3">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="anomalyRulesTable" class="divide-y divide-border-dark"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="lg:col-span-1 space-y-6">
                    <div class="bg-surface-dark rounded-xl p-6 border border-border-dark">
                        <h2 class="text-lg font-semibold text-white mb-6">Anomaly Trends</h2>
                        <div class="space-y-6">
                            <div>
                                <p class="text-xs text-text-muted uppercase mb-3">Alerts by Severity</p>
                                <div id="severityTrend" class="space-y-2"></div>
                            </div>
                            <div class="pt-4 border-t border-border-dark">
                                <p class="text-xs text-text-muted uppercase mb-3">Detection History (7d)</p>
                                <div id="anomalyHistoryList" class="space-y-2 max-h-64 overflow-y-auto pr-2"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Log Detail Modal -->
    <div id="logDetailModal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
        <div class="bg-surface-dark rounded-xl max-w-3xl w-full mx-4 max-h-[80vh] overflow-hidden">
            <div class="flex items-center justify-between px-6 py-4 border-b border-border-dark">
                <h3 class="text-lg font-semibold text-white">Log Details</h3>
                <button onclick="closeLogModal()" class="text-text-muted hover:text-white"><i class="fas fa-times"></i></button>
            </div>
            <div class="p-6 overflow-y-auto max-h-[calc(80vh-60px)]">
                <div id="logDetailContent" class="space-y-4"></div>
            </div>
        </div>
    </div>

    <!-- Module Loading (ordered by dependency) -->
    <script src="https://cdn.jsdelivr.net/gh/LordKnowsBest/LMDR-_-WEBSITE-V2@main/src/public/admin/js/admin-observability-config.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/LordKnowsBest/LMDR-_-WEBSITE-V2@main/src/public/admin/js/admin-observability-bridge.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/LordKnowsBest/LMDR-_-WEBSITE-V2@main/src/public/admin/js/admin-observability-render.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/LordKnowsBest/LMDR-_-WEBSITE-V2@main/src/public/admin/js/admin-observability-logic.js"></script>

    <!-- Bootstrap -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            AdminObservabilityLogic.init();
        });
    </script>
</body>
</html>
