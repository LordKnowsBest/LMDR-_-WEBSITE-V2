<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover"/>
  <title>VelocityMatch | Platform Configuration</title>

  <!-- Fonts / Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

  <!-- Tailwind CDN + inline config -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: { extend: { colors: { 'lmdr-blue': '#2563eb', 'lmdr-deep': '#1e40af', 'lmdr-yellow': '#fbbf24', 'lmdr-dark': '#0f172a', 'beige': '#F5F5DC', 'beige-d': '#E8E0C8', 'tan': '#C8B896', 'ivory': '#FFFFF5', 'sg': '#859900' }, fontFamily: { 'd': ['Inter', 'sans-serif'] } } }
    };
  </script>

  <!-- External CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/LordKnowsBest/LMDR-_-WEBSITE-V2@main/src/public/admin/css/admin-platform-config.css"/>
</head>

<body>
  <div id="loadingOverlay" class="loading-overlay">
    <div class="text-center">
      <i class="fas fa-circle-notch fa-spin text-4xl text-indigo-500 mb-4"></i>
      <p class="text-slate-300">Saving settings...</p>
    </div>
  </div>

  <!-- Header -->
  <header class="glass-card mx-4 mt-4 mb-6">
    <div class="p-4 flex items-center justify-between">
      <div>
        <h1 class="text-xl font-bold text-white flex items-center gap-2">
          <i class="fas fa-sliders-h text-indigo-400"></i>
          Platform Configuration
        </h1>
        <p class="text-sm text-slate-400 mt-1">Manage matching weights and system parameters</p>
      </div>
      <div class="flex items-center gap-2">
        <button id="resetAllBtn" class="touch-target px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg text-sm font-medium transition-colors">
          Reset Defaults
        </button>
        <button id="saveAllBtn" class="touch-target px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-medium transition-colors">
          <i class="fas fa-save mr-2"></i>Save All
        </button>
      </div>
    </div>

    <!-- Tabs -->
    <div class="flex border-t border-slate-700 overflow-x-auto">
      <button class="tab-btn active flex-1 px-4 py-3 text-sm font-medium text-slate-400 touch-target whitespace-nowrap" data-tab="carrier-weights">
        <i class="fas fa-truck mr-2"></i>Carrier Weights
      </button>
      <button class="tab-btn flex-1 px-4 py-3 text-sm font-medium text-slate-400 touch-target whitespace-nowrap" data-tab="driver-weights">
        <i class="fas fa-user-tie mr-2"></i>Driver Weights
      </button>
      <button class="tab-btn flex-1 px-4 py-3 text-sm font-medium text-slate-400 touch-target whitespace-nowrap" data-tab="system">
        <i class="fas fa-microchip mr-2"></i>System
      </button>
      <button class="tab-btn flex-1 px-4 py-3 text-sm font-medium text-slate-400 touch-target whitespace-nowrap" data-tab="tiers">
        <i class="fas fa-layer-group mr-2"></i>Tiers
      </button>
      <button class="tab-btn flex-1 px-4 py-3 text-sm font-medium text-slate-400 touch-target whitespace-nowrap" data-tab="jobs">
        <i class="fas fa-tasks mr-2"></i>Jobs
      </button>
      <button class="tab-btn flex-1 px-4 py-3 text-sm font-medium text-slate-400 touch-target whitespace-nowrap" data-tab="ui">
        <i class="fas fa-paint-brush mr-2"></i>UI
      </button>
    </div>
  </header>

  <main class="px-4 pb-8">
    <!-- Carrier Weights Tab -->
    <div id="carrier-weightsTab" class="tab-content">
      <div class="glass-card p-6">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-lg font-semibold text-white">Carrier Matching Weights</h2>
          <div id="carrierWeightsTotal" class="px-3 py-1 rounded bg-indigo-500/20 text-indigo-400 text-sm font-bold">Total: 100%</div>
        </div>
        <div id="carrierWeightsList" class="space-y-6"></div>
      </div>
    </div>

    <!-- Driver Weights Tab -->
    <div id="driver-weightsTab" class="tab-content hidden">
      <div class="glass-card p-6">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-lg font-semibold text-white">Driver Matching Weights</h2>
          <div id="driverWeightsTotal" class="px-3 py-1 rounded bg-indigo-500/20 text-indigo-400 text-sm font-bold">Total: 100%</div>
        </div>
        <div id="driverWeightsList" class="space-y-6"></div>
      </div>
    </div>

    <!-- System Settings Tab -->
    <div id="systemTab" class="tab-content hidden">
      <div class="grid md:grid-cols-2 gap-6">
        <div class="glass-card p-6">
          <h2 class="text-lg font-semibold text-white mb-4 flex items-center gap-2">
            <i class="fas fa-bolt text-amber-400"></i> Performance &amp; Cache
          </h2>
          <div class="space-y-4">
            <div>
              <label class="block text-sm text-slate-400 mb-2">Enrichment Cache TTL (Days)</label>
              <input type="number" id="fmcsa_refresh_days" class="w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white" min="1" max="90"/>
            </div>
            <div>
              <label class="block text-sm text-slate-400 mb-2">UI Cache TTL (Minutes)</label>
              <input type="number" id="cache_ttl_minutes" class="w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white" min="0" max="1440"/>
            </div>
          </div>
        </div>
        <div class="glass-card p-6">
          <h2 class="text-lg font-semibold text-white mb-4 flex items-center gap-2">
            <i class="fas fa-layer-group text-blue-400"></i> Batch &amp; Rate Limits
          </h2>
          <div class="space-y-4">
            <div>
              <label class="block text-sm text-slate-400 mb-2">Enrichment Batch Size</label>
              <input type="number" id="enrichment_batch_size" class="w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white" min="1" max="10"/>
            </div>
            <div>
              <label class="block text-sm text-slate-400 mb-2">Email Batch Size</label>
              <input type="number" id="email_batch_size" class="w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white" min="1" max="20"/>
            </div>
            <div>
              <label class="block text-sm text-slate-400 mb-2">API Rate Limit (Req/Sec)</label>
              <input type="number" id="api_rate_limit_per_second" class="w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white" min="1" max="20"/>
            </div>
          </div>
        </div>
        <div class="glass-card p-6 md:col-span-2">
          <div class="flex items-center justify-between">
            <div>
              <h2 class="text-lg font-semibold text-white">Maintenance Mode</h2>
              <p class="text-sm text-slate-400">When enabled, the site will be read-only for most users.</p>
            </div>
            <div class="flex items-center gap-3">
              <span id="maintenanceStatus" class="text-xs font-bold px-2 py-1 rounded bg-slate-700 text-slate-400 uppercase">Inactive</span>
              <button id="maintenanceToggle" class="touch-target px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg text-sm font-medium transition-colors">
                Enable
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tiers Tab -->
    <div id="tiersTab" class="tab-content hidden">
      <div id="tierLimitsGrid" class="grid md:grid-cols-3 gap-6"></div>
    </div>

    <!-- Jobs Tab -->
    <div id="jobsTab" class="tab-content hidden">
      <div class="glass-card overflow-hidden">
        <table class="w-full text-left">
          <thead class="bg-slate-800/50 border-b border-slate-700">
            <tr>
              <th class="px-6 py-4 text-xs font-bold text-slate-400 uppercase tracking-wider">Job Name</th>
              <th class="px-6 py-4 text-xs font-bold text-slate-400 uppercase tracking-wider">Last Run</th>
              <th class="px-6 py-4 text-xs font-bold text-slate-400 uppercase tracking-wider">Status</th>
              <th class="px-6 py-4 text-xs font-bold text-slate-400 uppercase tracking-wider">Action</th>
            </tr>
          </thead>
          <tbody id="jobsList" class="divide-y divide-slate-700"></tbody>
        </table>
      </div>
    </div>

    <!-- UI Tab -->
    <div id="uiTab" class="tab-content hidden">
      <div class="glass-card p-6">
        <h2 class="text-lg font-semibold text-white mb-6">Announcement Banner</h2>
        <div class="space-y-4 max-w-2xl">
          <div class="flex items-center justify-between mb-2">
            <label class="text-sm text-slate-400 font-medium">Show Banner</label>
            <input type="checkbox" id="banner_enabled" class="w-5 h-5 accent-indigo-500"/>
          </div>
          <div>
            <label class="block text-sm text-slate-400 mb-2">Banner Text</label>
            <input type="text" id="banner_text" class="w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white"/>
          </div>
          <div>
            <label class="block text-sm text-slate-400 mb-2">Link URL (Optional)</label>
            <input type="text" id="banner_link" class="w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white"/>
          </div>
          <div>
            <label class="block text-sm text-slate-400 mb-2">Banner Style</label>
            <select id="banner_type" class="w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white">
              <option value="info">Info (Blue)</option>
              <option value="warning">Warning (Amber)</option>
              <option value="success">Success (Green)</option>
            </select>
          </div>
        </div>
      </div>
    </div>
  </main>

  <div id="toast" class="toast"></div>

  <!-- CDN Modules -->
  <script src="https://cdn.jsdelivr.net/gh/LordKnowsBest/LMDR-_-WEBSITE-V2@main/src/public/admin/js/admin-platform-config-config.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/LordKnowsBest/LMDR-_-WEBSITE-V2@main/src/public/admin/js/admin-platform-config-bridge.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/LordKnowsBest/LMDR-_-WEBSITE-V2@main/src/public/admin/js/admin-platform-config-render.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/LordKnowsBest/LMDR-_-WEBSITE-V2@main/src/public/admin/js/admin-platform-config-logic.js"></script>

  <!-- Bootstrap -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      PlatformConfigLogic.init();
    });
  </script>
</body>
</html>
