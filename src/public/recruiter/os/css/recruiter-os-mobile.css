/* ============================================================================
   RECRUITER OS — Mobile Responsive Overrides
   Target: iPhone 12/13 (390x844) per MOBILE_OPTIMIZATION_GUIDE.md
   ============================================================================ */

/* ── Tablet breakpoint ── */
@media (max-width: 1024px) {
  #ros-rail { width: 200px; }
  .cmd-bar { left: 200px; }
  .dock-pill { left: calc(50% + 100px); }
}

/* ── Mobile breakpoint ── */
@media (max-width: 768px) {

  /* Rail → hidden (hamburger menu) */
  #ros-rail {
    position: fixed;
    top: 48px;
    left: 0;
    bottom: 0;
    width: 280px;
    z-index: 200;
    background: #F5F5DC;
    transform: translateX(-100%);
    transition: transform .3s cubic-bezier(.4,0,.2,1);
    box-shadow: none;
  }
  #ros-rail.open {
    transform: translateX(0);
    box-shadow: 8px 0 24px rgba(0,0,0,.12);
  }

  /* Mobile overlay when rail is open */
  .rail-overlay {
    position: fixed;
    inset: 0;
    top: 48px;
    background: rgba(15,23,42,.3);
    z-index: 199;
    display: none;
  }
  .rail-overlay.vis { display: block; }

  /* Show hamburger button */
  .hamburger-btn { display: flex; }

  /* Command bar repositioned */
  .cmd-bar {
    left: 0;
    bottom: 90px;
    padding: 0 12px;
  }
  /* Show first 3 chips on mobile, hide the rest */
  .cmd-chips {
    display: flex;
    flex-wrap: nowrap;
    overflow-x: auto;
    gap: 6px;
    padding: 0 12px 6px;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
  .cmd-chips::-webkit-scrollbar { display: none; }
  .cmd-chips button { flex-shrink: 0; font-size: 10px; padding: 6px 12px; }
  .cmd-chips button:nth-child(n+4) { display: none; }
  .cmd-chat {
    max-width: 100%;
    padding: 8px 12px 8px 14px;
    border-radius: 20px;
  }

  /* Dock → full-width bottom bar */
  .dock-pill {
    left: 0 !important;
    right: 0;
    bottom: 0;
    transform: none;
    border-radius: 0;
    justify-content: space-around;
    padding: 8px 12px;
    padding-bottom: calc(8px + env(safe-area-inset-bottom, 0px));
    box-shadow: 0 -4px 20px rgba(0,0,0,.08);
  }
  .dock-pill .dk-i {
    width: 48px;
    height: 48px;
    min-width: 44px;
    min-height: 44px;
  }
  .dock-pill .dk-tip { display: none; }

  /* Chat thread → full-screen overlay */
  .chat-thread {
    position: fixed !important;
    inset: 48px 0 0 0;
    width: 100% !important;
    z-index: 180;
    border-left: none;
    transform: translateX(100%);
    transition: transform .3s cubic-bezier(.4,0,.2,1);
  }
  .chat-thread.open {
    width: 100% !important;
    transform: translateX(0);
  }

  /* Stage padding for bottom dock */
  #ros-stage {
    padding-bottom: 140px !important;
  }

  /* Center views responsive */
  .center-view { padding: 16px !important; }

  /* Topbar mobile adjustments */
  #ros-topbar nav { display: none; }
  #ros-topbar .search-pill { display: none; }

  /* Settings orb */
  .settings-orb {
    bottom: calc(70px + env(safe-area-inset-bottom, 0px));
    left: 8px;
    width: 40px;
    height: 40px;
  }
  .settings-panel {
    bottom: calc(120px + env(safe-area-inset-bottom, 0px));
    left: 8px;
    width: calc(100vw - 16px);
    max-width: 300px;
  }

  /* Spotlight full-width */
  .spot-ov { padding-top: 10vh; }
  .spot-box { width: calc(100vw - 32px) !important; max-width: 520px; }

  /* ── Search View: Filter orbs → horizontal scroll ── */
  .filter-orb-scroll {
    flex-wrap: nowrap !important;
    overflow-x: auto;
    scrollbar-width: none;
    -webkit-overflow-scrolling: touch;
    padding-bottom: 4px;
  }
  .filter-orb-scroll::-webkit-scrollbar { display: none; }
  .filter-orb { flex-shrink: 0; }

  /* Search sort dropdown: smaller on mobile */
  #search-sort { font-size: 10px; padding: 8px 10px; }

  /* Search view: profile modal → full-screen */
  #profile-modal > div:last-child {
    max-width: 100% !important;
    max-height: 100% !important;
    border-radius: 0 !important;
    height: 100%;
    margin: 0;
  }
  #profile-modal {
    padding: 0 !important;
  }
  /* Profile modal grid: single column on mobile */
  #profile-modal .grid-cols-2 {
    grid-template-columns: 1fr !important;
  }

  /* Message modal → full-width bottom sheet feel */
  #message-modal > div:last-child {
    max-width: 100% !important;
    border-radius: 16px 16px 0 0 !important;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
  }
  #message-modal {
    align-items: flex-end !important;
    padding: 0 !important;
  }

  /* Save search modal → full-width */
  #save-search-modal > div:last-child {
    max-width: 100% !important;
    border-radius: 16px 16px 0 0 !important;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
  }
  #save-search-modal {
    align-items: flex-end !important;
    padding: 0 !important;
  }

  /* Pagination: smaller buttons on mobile */
  #search-pagination button {
    min-width: 28px;
    min-height: 28px;
    font-size: 10px;
    padding: 4px 6px;
  }

  /* Location row → stack on mobile */
  #filter-zip { max-width: 120px; }
}

/* ── Small phone (iPhone SE / narrow) ── */
@media (max-width: 375px) {
  .dock-pill { gap: 8px; padding: 6px 8px; }
  .dock-pill .dk-i { width: 44px; height: 44px; }
  .cmd-chat input { font-size: 16px; }
}

/* ── Touch target enforcement ── */
@media (pointer: coarse) {
  .tool-orb { min-width: 44px; min-height: 44px; }
  .dock-pill .dk-i { min-width: 44px; min-height: 44px; }
  .cmd-chips button { min-height: 44px; padding: 10px 16px; }
  .settings-orb { min-width: 44px; min-height: 44px; }
}

/* ── Safe area insets (iPhone notch) ── */
@supports (padding: env(safe-area-inset-bottom)) {
  .dock-pill {
    padding-bottom: calc(10px + env(safe-area-inset-bottom));
  }
  #ros-stage {
    padding-bottom: calc(120px + env(safe-area-inset-bottom));
  }
}
