import * as dataAccess from 'backend/dataAccess';

const COLLECTION_KEYS = {
    mentorProfiles: 'mentorProfiles'
};

const SAMPLE_MENTORS = [
    {
        firstName: "James",
        lastName: "Wilson",
        email: "james.wilson@example.com",
        driverId: "seed_mentor_1",
        yearsExperience: 15,
        location: "Dallas, TX",
        specialties: ["Flatbed", "Owner Operator", "Route Planning"],
        languages: ["English", "Spanish"],
        bio: "15 years of OTR experience, specializing in flatbed loads. I've been an owner-operator for 8 years and love helping new drivers navigate the business side of trucking.",
        availability: ["Weekends", "Phone Call"],
        maxMentees: 3,
        currentMentees: 1,
        status: "Active",
        rating: 4.9,
        photoUrl: "https://randomuser.me/api/portraits/men/32.jpg"
    },
    {
        firstName: "Sarah",
        lastName: "Jenkins",
        email: "sarah.j@example.com",
        driverId: "seed_mentor_2",
        yearsExperience: 8,
        location: "Chicago, IL",
        specialties: ["Refrigerated", "Team Driving", "Health & Wellness"],
        languages: ["English"],
        bio: "Team driver for 6 years, now running solo regional. Passionate about staying healthy on the road and managing fatigue.",
        availability: ["Evenings", "Text"],
        maxMentees: 2,
        currentMentees: 0,
        status: "Active",
        rating: 5.0,
        photoUrl: "https://randomuser.me/api/portraits/women/44.jpg"
    },
    {
        firstName: "Robert",
        lastName: "Chen",
        email: "r.chen@example.com",
        driverId: "seed_mentor_3",
        yearsExperience: 22,
        location: "Los Angeles, CA",
        specialties: ["Hazmat", "Tanker", "Local Delivery"],
        languages: ["English", "Mandarin"],
        bio: "Hazmat certified veteran with over 2 million safe miles. I can help you with endorsements, safety protocols, and local route optimization.",
        availability: ["Weekdays", "Video Call"],
        maxMentees: 5,
        currentMentees: 4,
        status: "Active",
        rating: 4.8,
        photoUrl: "https://randomuser.me/api/portraits/men/67.jpg"
    }
];

export async function seedMentorData() {
    console.log("Starting Mentor Data Seeding...");

    let created = 0;
    let errors = 0;

    for (const mentor of SAMPLE_MENTORS) {
        try {
            // Check if exists by email to prevent dupes during dev
            // In real app, we use driverId but these are fake IDs
            const existing = await dataAccess.queryRecords(COLLECTION_KEYS.mentorProfiles, {
                filters: { email: mentor.email },
                limit: 1
            });

            if (existing.items && existing.items.length > 0) {
                console.log(`Skipping ${mentor.firstName} - already exists`);
                continue;
            }

            await dataAccess.insertRecord(COLLECTION_KEYS.mentorProfiles, {
                ...mentor,
                joinedDate: new Date()
            });
            created++;

        } catch (error) {
            console.error(`Failed to seed ${mentor.firstName}:`, error);
            errors++;
        }
    }

    return {
        success: true,
        created,
        errors,
        message: `Seeding complete. Created ${created} profiles.`
    };
}
