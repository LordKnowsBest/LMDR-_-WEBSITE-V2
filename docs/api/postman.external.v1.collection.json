{
  "info": {
    "name": "LMDR External API v1",
    "_postman_id": "9ab01c95-7e8c-42f2-b1d8-0af9d5718d39",
    "description": "Collection for LMDR external partner APIs served via /_functions/api_gateway/v1/*.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "https://www.lastmiledr.app/_functions/api_gateway"
    },
    {
      "key": "apiKey",
      "value": "lmdr_live_replace_me"
    },
    {
      "key": "dotNumber",
      "value": "123456"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{apiKey}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Safety",
      "item": [
        {
          "name": "Carrier Lookup",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/v1/safety/carrier/{{dotNumber}}"
          }
        },
        {
          "name": "CSA Current",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/v1/safety/csa/{{dotNumber}}"
          }
        },
        {
          "name": "CSA History",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/v1/safety/csa/{{dotNumber}}/history?months=6"
          }
        },
        {
          "name": "Subscribe Alerts",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dot_numbers\": [123456],\n  \"alert_types\": [\"csa_change\"],\n  \"webhook_url\": \"https://partner.example/webhooks/lmdr\"\n}"
            },
            "url": "{{baseUrl}}/v1/safety/alerts/subscribe"
          }
        }
      ]
    },
    {
      "name": "Intelligence",
      "item": [
        {
          "name": "Carrier Intelligence",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/v1/intelligence/carrier/{{dotNumber}}"
          }
        },
        {
          "name": "Sentiment",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/v1/intelligence/sentiment/{{dotNumber}}"
          }
        },
        {
          "name": "Market",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/v1/intelligence/market?region=southeast&freight_type=dry_van&operation_type=otr"
          }
        }
      ]
    },
    {
      "name": "Operations",
      "item": [
        {
          "name": "Parking Search",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/v1/parking/search?lat=35.1495&lng=-90.0490&radius=25"
          }
        },
        {
          "name": "Fuel Prices",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/v1/fuel/prices?lat=35.1495&lng=-90.0490&radius=25"
          }
        }
      ]
    },
    {
      "name": "Matching",
      "item": [
        {
          "name": "Driver Search",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"filters\": {\n    \"cdl_class\": \"A\",\n    \"endorsements_required\": [\"H\"],\n    \"min_experience_years\": 2,\n    \"location\": {\n      \"lat\": 35.1495,\n      \"lng\": -90.0490\n    },\n    \"max_distance_miles\": 100\n  },\n  \"limit\": 10\n}"
            },
            "url": "{{baseUrl}}/v1/matching/drivers/search"
          }
        }
      ]
    },
    {
      "name": "Documents",
      "item": [
        {
          "name": "CDL Extract (base64)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"mime_type\": \"image/jpeg\",\n  \"base64_data\": \"REPLACE_WITH_BASE64\"\n}"
            },
            "url": "{{baseUrl}}/v1/documents/cdl/extract"
          }
        }
      ]
    },
    {
      "name": "Engagement",
      "item": [
        {
          "name": "User Progress",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/v1/engagement/user/usr_123/progress?user_type=driver"
          }
        },
        {
          "name": "Award XP",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"usr_123\",\n  \"action\": \"custom_training_complete\",\n  \"xp_amount\": 50,\n  \"user_type\": \"driver\",\n  \"metadata\": {\n    \"source\": \"postman\"\n  }\n}"
            },
            "url": "{{baseUrl}}/v1/engagement/xp/award"
          }
        }
      ]
    }
  ]
}
