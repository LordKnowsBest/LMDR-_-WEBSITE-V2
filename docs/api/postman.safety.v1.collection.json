{
  "info": {
    "name": "LMDR Safety APIs v1",
    "_postman_id": "e645d808-22e5-4f38-b589-c6f5cf5f9f65",
    "description": "Safety and compliance endpoints for FMCSA/CSA monitoring and alert subscriptions.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    { "key": "baseUrl", "value": "https://www.lastmiledr.app/_functions/api_gateway" },
    { "key": "apiKey", "value": "lmdr_live_replace_me" },
    { "key": "dotNumber", "value": "1234567" },
    { "key": "subscriptionId", "value": "sub_replace_me" }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      { "key": "token", "value": "{{apiKey}}", "type": "string" }
    ]
  },
  "item": [
    {
      "name": "Carrier Lookup",
      "request": {
        "method": "GET",
        "url": "{{baseUrl}}/v1/safety/carrier/{{dotNumber}}"
      }
    },
    {
      "name": "Batch Carrier Lookup",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"dot_numbers\": [1234567, 2345678]\n}"
        },
        "url": "{{baseUrl}}/v1/safety/carriers/batch"
      }
    },
    {
      "name": "CSA Current",
      "request": {
        "method": "GET",
        "url": "{{baseUrl}}/v1/safety/csa/{{dotNumber}}"
      }
    },
    {
      "name": "CSA History",
      "request": {
        "method": "GET",
        "url": "{{baseUrl}}/v1/safety/csa/{{dotNumber}}/history?months=6"
      }
    },
    {
      "name": "Subscribe Alerts",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"dot_numbers\": [1234567],\n  \"alert_types\": [\"csa_change\"],\n  \"webhook_url\": \"https://partner.example/webhooks/lmdr\"\n}"
        },
        "url": "{{baseUrl}}/v1/safety/alerts/subscribe"
      }
    },
    {
      "name": "List Subscriptions",
      "request": {
        "method": "GET",
        "url": "{{baseUrl}}/v1/safety/alerts/subscriptions"
      }
    },
    {
      "name": "Delete Subscription",
      "request": {
        "method": "DELETE",
        "url": "{{baseUrl}}/v1/safety/alerts/{{subscriptionId}}"
      }
    }
  ]
}
