{
  "env": {
    "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1"
  },
  "permissions": {
    "allow": [
      "Bash(git -C \"C:\\\\Users\\\\nolan\\\\LMDR_WEBSITE_V2\\\\LMDR-_-WEBSITE-V2\" log --oneline --all --graph --decorate)",
      "Bash(git -C \"C:\\\\Users\\\\nolan\\\\LMDR_WEBSITE_V2\\\\LMDR-_-WEBSITE-V2\" log --all --pretty=format:\"%h|%an|%ae|%ad|%s\" --date=short)",
      "Bash(git -C \"C:\\\\Users\\\\nolan\\\\LMDR_WEBSITE_V2\\\\LMDR-_-WEBSITE-V2\" branch -a -v)",
      "Bash(git -C:*)",
      "Bash(cmd /c \"rmdir /s /q \"\"C:\\\\Users\\\\nolan\\\\LMDR_WEBSITE_V2\\\\LMDR-_-WEBSITE-V2\\\\LMDR-_-WEBSITE-V2\"\"\")",
      "Bash(test:*)",
      "Bash(find:*)",
      "Bash(tree:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(git fetch:*)",
      "Bash(git pull:*)",
      "mcp__wix-mcp-remote__WixREADME",
      "mcp__wix-mcp-remote__ReadFullDocsArticle",
      "mcp__wix-mcp-remote__SearchWixSDKDocumentation",
      "mcp__wix-mcp-remote__SearchWixRESTDocumentation",
      "Bash(wix preview:*)",
      "Bash(wix dev)",
      "Bash(wix sync:*)",
      "Bash(wix publish:*)",
      "Bash(printf:*)",
      "Bash(yes:*)",
      "mcp__wix-mcp-remote__ListWixSites",
      "mcp__wix-mcp-remote__ReadFullDocsMethodSchema",
      "mcp__stripe__get_stripe_account_info",
      "mcp__stripe__list_products",
      "mcp__stripe__list_prices",
      "Bash(npm i:*)",
      "Bash(claude:*)",
      "Bash(timeout:*)",
      "Bash(npm run dev)",
      "mcp__stripe__fetch_stripe_resources",
      "Bash(npx wix publish)",
      "Bash(npx wix publish:*)",
      "mcp__wix-mcp-remote__CallWixSiteAPI",
      "Bash(claude mcp add:*)",
      "Bash(claude mcp list:*)",
      "Bash(git stash:*)",
      "Bash(git stash pop:*)",
      "Bash(npm test)",
      "Bash(npm run:*)",
      "Bash(npm install:*)",
      "Bash(npx jest:*)",
      "Bash(node -e:*)",
      "Bash(node --experimental-vm-modules ./node_modules/jest/bin/jest.js:*)",
      "WebSearch",
      "WebFetch(domain:transportal.cee.wisc.edu)",
      "WebFetch(domain:511wi.gov)",
      "WebFetch(domain:trucksparkhere.com)",
      "WebFetch(domain:511ny.org)",
      "WebFetch(domain:publicapi.ohgo.com)",
      "WebFetch(domain:tpims.ksdot.gov)",
      "WebFetch(domain:beta.kandrive.org)",
      "WebFetch(domain:511mn.org)",
      "WebFetch(domain:iowadot.gov)",
      "WebFetch(domain:511in.org)",
      "WebFetch(domain:nap.nationalacademies.org)",
      "WebFetch(domain:drive.ky.gov)",
      "WebFetch(domain:www.nationalacademies.org)",
      "WebFetch(domain:511ia.org)",
      "WebFetch(domain:opengisdata.ky.gov)",
      "WebFetch(domain:mi511.gov)",
      "WebFetch(domain:www.michigan.gov)",
      "WebFetch(domain:content.trafficwise.org)",
      "WebFetch(domain:www.dot.state.mn.us)",
      "WebFetch(domain:hub.mph.in.gov)",
      "WebFetch(domain:mdotjboss.state.mi.us)",
      "WebFetch(domain:gis-mdot.opendata.arcgis.com)",
      "WebFetch(domain:ops.fhwa.dot.gov)",
      "WebFetch(domain:data.iowadot.gov)",
      "WebFetch(domain:www.trimarc.org)",
      "Bash(curl:*)",
      "WebFetch(domain:truckparking.travelmidwest.com)",
      "WebFetch(domain:api.drivetexas.org)",
      "WebFetch(domain:511ga.org)",
      "mcp__airtable__list_bases",
      "mcp__airtable__list_tables",
      "Bash(powershell -Command:*)",
      "mcp__airtable__list_records",
      "Bash(grep:*)",
      "Bash(if not exist \"tests\" mkdir tests)",
      "Bash(xcopy:*)",
      "mcp__chrome-devtools__list_pages",
      "mcp__chrome-devtools__navigate_page",
      "mcp__chrome-devtools__take_snapshot",
      "mcp__chrome-devtools__list_console_messages",
      "mcp__chrome-devtools__click",
      "mcp__chrome-devtools__take_screenshot",
      "mcp__chrome-devtools__evaluate_script",
      "mcp__chrome-devtools__wait_for",
      "mcp__chrome-devtools__handle_dialog",
      "mcp__chrome-devtools__get_console_message",
      "WebFetch(domain:iris.dot.state.mn.us)",
      "WebFetch(domain:data.dot.state.mn.us)",
      "mcp__airtable__create_table",
      "mcp__airtable__create_field",
      "Bash(npx:*)",
      "Bash(powershell.exe -NoProfile -Command:*)",
      "Bash(powershell -NoProfile -Command:*)",
      "Bash(node:*)",
      "Bash(python:*)",
      "Bash(python3:*)",
      "Bash(git checkout:*)",
      "Bash(git rebase:*)",
      "mcp__airtable__search_records",
      "Bash(dir:*)",
      "mcp__chrome-devtools__fill",
      "Bash(xargs:*)",
      "Bash(ls:*)",
      "Bash(tr:*)",
      "Bash(findstr:*)",
      "Bash(cmd /c:*)",
      "Bash(for f in *.jsw)",
      "Bash(do if grep -q \"import wixData\" \"$f\")",
      "Bash(then if grep -q \"usesAirtable\\\\|airtableClient\\\\|from ''backend/config''\" \"$f\")",
      "Bash(then echo \"✅ $f\" else echo \"❌ $f\" fi fi done)",
      "Bash(do)",
      "Bash(echo:*)",
      "Bash(done)",
      "Bash(sort:*)",
      "mcp__chrome-devtools__list_network_requests",
      "mcp__airtable__create_record",
      "mcp__airtable__update_field",
      "mcp__airtable__delete_record",
      "mcp__chrome-devtools__fill_form",
      "mcp__chrome-devtools__press_key",
      "Bash(Select-Object -First 1)",
      "Bash(del \"C:\\\\Users\\\\Reputationist\\\\Desktop\\\\LMDR V2\\\\LMDR-_-WEBSITE-V2\\\\.git\\\\index.lock\")",
      "Bash(cd:*)",
      "mcp__chrome-devtools__new_page",
      "Bash(while read f)",
      "Bash(if grep -q \"wixData\\\\.\\\\\\(insert\\\\|update\\\\|query\\\\|get\\\\|remove\\\\|bulkInsert\\\\|bulkUpdate\\\\|bulkRemove\\\\|save\\\\\\)\\(\" \"$f\")",
      "Bash(then)",
      "Bash(fi)",
      "Bash(wc:*)",
      "Bash(npm ls:*)",
      "Bash(git status:*)",
      "Bash(npm test:*)",
      "mcp__wix-mcp-remote__ManageWixSite",
      "Bash(more:*)",
      "WebFetch(domain:airtable.com)",
      "Bash(Out-File -Encoding utf8 temp_tables.json)",
      "Bash(powershell.exe:*)",
      "Bash(for:*)",
      "Bash(powershell -NoProfile -ExecutionPolicy Bypass -File:*)",
      "Bash(for f in \"v2_Announcement Read Receipts.md\" \"v2_Announcement Comments.md\" \"v2_Carrier Notification Settings.md\" \"v2_Driver Notification Preferences.md\")",
      "Bash(for f in \"v2_Announcement_Read_Receipts.md\" \"v2_Announcement_Comments.md\" \"v2_Carrier_Notification_Settings.md\" \"v2_Driver_Notification_Preferences.md\")",
      "Bash(for f in \"v2_forum_categories.md\" \"v2_forum_threads.md\" \"v2_forum_posts.md\" \"v2_forum_reports.md\" \"v2_health_resources.md\" \"v2_health_tips.md\" \"v2_pet_friendly_locations.md\" \"v2_pet_friendly_reviews.md\")",
      "Bash(yarn:*)",
      "mcp__airtable__update_record",
      "Bash({ echo \"=== Files with import from backend ===\")",
      "Bash(})",
      "Bash(__NEW_LINE_7945a0b70cd4903d__ })",
      "Bash({ grep -l \"import.*from.*\\\\.\\\\./.*backend\\\\|import.*from.*backend\" src/public/__tests__/*.test.js src/public/__tests__/backend/*.test.js)",
      "Bash({ echo \"=== PATTERN 1: import from ''backend/'' \\(direct, no .jsw extension\\) ===\")",
      "Bash(__NEW_LINE_92428cf424c374f0__ })",
      "mcp__chrome-devtools__select_page",
      "Bash(if not exist \"C:\\\\Users\\\\nolan\\\\LMDR_WEBSITE_V2\\\\LMDR-_-WEBSITE-V2\\\\scratchpad\\\\e2e\" mkdir \"C:\\\\Users\\\\nolan\\\\LMDR_WEBSITE_V2\\\\LMDR-_-WEBSITE-V2\\\\scratchpad\\\\e2e\")",
      "mcp__claude_ai_WIX__SearchWixRESTDocumentation",
      "mcp__chrome-devtools__resize_page",
      "WebFetch(domain:www-lastmiledr-app.filesusr.com)",
      "Bash(wix whoami:*)",
      "Bash(do sed -i 's/^    //' \"$f\")",
      "Bash(git ls-tree:*)",
      "mcp__airtable__get_record",
      "mcp__airtable__update_table",
      "Bash(git rm:*)",
      "Bash(du:*)",
      "Bash(while read d)",
      "Bash(do du -sh \"$d\")",
      "Bash(npm view:*)",
      "WebFetch(domain:cdn.jsdelivr.net)",
      "Bash(do curl -s \"https://purge.jsdelivr.net/gh/LordKnowsBest/LMDR-_-WEBSITE-V2@main/src/public/recruiter/os/js/$f\")",
      "Bash(start \"\" \"C:\\\\Users\\\\nolan\\\\LMDR_WEBSITE_V2\\\\LMDR-_-WEBSITE-V2\\\\agentic-concept-map.html\")",
      "Bash(start \"\" \"C:\\\\Users\\\\nolan\\\\LMDR_WEBSITE_V2\\\\LMDR-_-WEBSITE-V2\\\\driver-journey-agentic-map.html\")",
      "Bash(gh pr list:*)",
      "Bash(git config:*)",
      "Bash(awk:*)",
      "Bash(__NEW_LINE_8d8c5b8d460ab0c3__ echo \"=== DRIVER_ROAD_UTILITIES.html ===\")",
      "Bash(__NEW_LINE_fbe768ac8dcb6792__ echo \"=== RecruiterDashboard.html inline script ===\")",
      "Bash(__NEW_LINE_fbe768ac8dcb6792__ sed -n '17,/^  <\\\\/script>/p' \"src/public/recruiter/RecruiterDashboard.html\")",
      "Bash(__NEW_LINE_8abd064fadf6745f__ echo \"\")",
      "Bash(__NEW_LINE_8abd064fadf6745f__ echo \"=== ADMIN_DASHBOARD.html inline scripts ===\")",
      "Bash(__NEW_LINE_8abd064fadf6745f__ sed -n '14,/^    <\\\\/script>/p' \"src/public/admin/ADMIN_DASHBOARD.html\")",
      "Bash(railway:*)",
      "Bash(TOKEN=\"ad5f6743cdb22781b686f9b7b20eb09d22c58d5961e40037\")",
      "Bash(do curl -sS \"https://purge.jsdelivr.net/gh/LordKnowsBest/LMDR-_-WEBSITE-V2@main/src/public/driver/$f\")",
      "mcp__chrome-devtools__upload_file",
      "Bash(echo Done:*)",
      "Bash(wix:*)",
      "Bash(rm:*)",
      "Bash(npm root:*)",
      "Bash(kill 842:*)",
      "Bash(head:*)",
      "Bash(true:*)",
      "Bash(sleep 15:*)",
      "Bash(sleep 60:*)",
      "WebFetch(domain:docs.pinecone.io)",
      "Bash(cd /c/Users/nolan/LMDR_WEBSITE_V2/LMDR-_-WEBSITE-V2 && DRY_RUN=true node --env-file=services/ai-intelligence/.env scripts/bulk-embed-carriers.js 2>&1)",
      "Bash(cd /c/Users/nolan/LMDR_WEBSITE_V2/LMDR-_-WEBSITE-V2 && sed -i 's|AIRTABLE_PAT=.*|AIRTABLE_PAT=pata0oN2XeJYSlNIo.431573b00d85a41f9f39aaae7551c385ff64311025cd5fb117f434592fb78d94|' services/ai-intelligence/.env && DRY_RUN=true node --env-file=services/ai-intelligence/.env scripts/bulk-embed-carriers.js 2>&1)",
      "Bash(kill 738:*)",
      "Bash(tail:*)",
      "Bash(cd /c/Users/nolan/LMDR_WEBSITE_V2/LMDR-_-WEBSITE-V2/services/ai-intelligence && source .env && python3 - <<'EOF'\nimport urllib.request, urllib.parse, json, os\n\npat   = os.environ['AIRTABLE_PAT']\nbase  = 'app9N1YCJ3gdhExA0'\ntable = 'Carriers \\(Master\\)'\ntotal = 0\noffset = None\n\nwhile True:\n    params = {'pageSize': '100', 'view': 'Grid view', 'fields[]': 'DOT_NUMBER'}\n    if offset:\n        params['offset'] = offset\n    url = f\"https://api.airtable.com/v0/{base}/{urllib.parse.quote\\(table\\)}?{urllib.parse.urlencode\\(params\\)}\"\n    req = urllib.request.Request\\(url, headers={'Authorization': f'Bearer {pat}'}\\)\n    with urllib.request.urlopen\\(req\\) as r:\n        data = json.loads\\(r.read\\(\\)\\)\n    total += len\\(data.get\\('records', []\\)\\)\n    offset = data.get\\('offset'\\)\n    print\\(f'  ...{total} so far', end='\\\\r'\\)\n    if not offset:\n        break\n\nprint\\(f'\\\\nTotal records in Carriers \\(Master\\): {total}'\\)\nEOF)",
      "Bash(echo === Check current Railway uptime ===:*)",
      "Bash(echo === Test GET on async route \\(to see if it exists at all\\) ===:*)",
      "Bash(echo === Test 1: List fields in Carriers \\(Master\\) with 1 record ===:*)",
      "Bash(echo === All fields in Carriers \\(Master\\) ===:*)",
      "Bash(grep node:*)",
      "Bash(do grep:*)",
      "Bash(cp:*)",
      "WebFetch(domain:github.com)",
      "mcp__claude_ai_WIX__CallWixSiteAPI",
      "Bash(sed:*)",
      "Bash(taskkill:*)",
      "Bash(tasklist:*)",
      "WebFetch(domain:ai.google.dev)",
      "WebFetch(domain:docs.cloud.google.com)",
      "Bash(start:*)",
      "Bash(/tmp/ai_services_clean.txt:*)",
      "Bash(do:*)",
      "Bash(/tmp/ai_access_summary.txt:*)",
      "Bash(cat > /tmp/driver_map_summary.txt << 'EOF'\nDRIVER SURFACE MAPPING - COMPREHENSIVE REPORT\n==============================================\n\n## 1. DRIVER PAGE FILES IN src/pages/\n\nPrimary Driver Pages \\(wired to Wix HTML components\\):\n1. \"Driver Dashboard.ctupv.js\" → DRIVER_DASHBOARD.html\n2. \"DRIVER_ANNOUNCEMENTS.jgkc4.js\" → DRIVER_ANNOUNCEMENTS.html\n3. \"DRIVER_BADGES.jlfgc.js\" → DRIVER_BADGES.html\n4. \"DRIVER_DOCUMENT_UPLOAD.r5jyr.js\" → DRIVER_DOCUMENT_UPLOAD.html\n5. \"DRIVER_FORUMS.vzg3s.js\" → DRIVER_FORUMS.html\n6. \"DRIVER_GAMIFICATION.ik6n7.js\" → DRIVER_GAMIFICATION.html\n7. \"DRIVER_POLICIES.mbmmh.js\" → DRIVER_POLICIES.html\n8. \"AI - MATCHING.rof4w.js\" → AI_MATCHING.html \\(primary driver matching page\\)\n\nSecondary Driver Pages \\(placeholder/minimal page code\\):\n- \"DRIVER_MY_CAREER.q178n.js\" → DRIVER_MY_CAREER.html \\(empty - uses CDN modules\\)\n- \"Driver Jobs \\(Item\\).s0js1.js\" \\(minimal page code\\)\n- \"Driver Opportunities - Your Next Career .lb0uy.js\" \\(minimal page code\\)\n\nAdmin Reference Page \\(not driver-facing\\):\n- \"ADMIN_DRIVERS.uo7vb.js\" \\(admin-only driver search & management\\)\n- \"RECRUITER DRIVER SEARCH.qtecw.js\" \\(recruiter-facing driver search\\)\n\n## 2. DRIVER HTML FILES IN src/public/driver/\n\n19 driver-facing HTML components:\n1. AI_MATCHING.html\n2. CHALLENGES.html\n3. Driver Jobs.html\n4. Driver Opportunities - Your Next Career.html\n5. Driver Retention Best Practices.html\n6. DRIVER_ANNOUNCEMENTS.html\n7. DRIVER_BADGES.html\n8. DRIVER_DASHBOARD.html\n9. DRIVER_DOCUMENT_UPLOAD.html\n10. DRIVER_FORUMS.html\n11. DRIVER_GAMIFICATION.html\n12. DRIVER_MY_CAREER.html\n13. DRIVER_POLICIES.html\n14. DRIVER_ROAD_UTILITIES.html\n15. DRIVER_SURVEYS.html\n16. HEALTH_WELLNESS.html\n17. MENTOR_PROFILE.html\n18. MENTOR_PROGRAM.html\n19. PET_FRIENDLY.html\n\n## 3. DRIVER JS MODULES IN src/public/driver/js/\n\nBridge Modules \\(PostMessage communication layer\\):\n- ai-matching-bridge.js\n- document-upload-bridge.js\n- driver-announcements-bridge.js\n- driver-dashboard-bridge.js\n- driver-my-career-bridge.js\n- driver-policies-bridge.js\n- retention-bridge.js\n- road-utilities-bridge.js\n- surveys-bridge.js\n\nAI Matching Modules \\(heavy lifting\\):\n- ai-matching-accordion.js\n- ai-matching-agent.js \\(agent chat overlay\\)\n- ai-matching-helpers.js\n- ai-matching-modals.js\n- ai-matching-renderers.js\n- ai-matching-results.js\n\nLogic/Config Modules:\n- document-upload-config.js\n- document-upload-logic.js\n- document-upload-render.js\n- driver-announcements-logic.js\n- driver-dashboard-config.js\n- driver-dashboard-logic.js\n- driver-dashboard-render.js\n- driver-my-career-logic.js\n- driver-policies-logic.js\n- retention-logic.js\n- road-utilities-config.js\n- road-utilities-logic.js\n- road-utilities-render.js\n- surveys-config.js\n- surveys-logic.js\n- surveys-render.js\n\n## 4. DRIVER CSS IN src/public/driver/css/\n\n- ai-matching.css\n- document-upload.css\n- driver-announcements.css\n- driver-dashboard.css\n- driver-my-career.css\n- driver-policies.css\n- retention.css\n- road-utilities.css\n- surveys.css\n\n## 5. BACKEND SERVICE IMPORTS BY DRIVER PAGE\n\n### \"Driver Dashboard.ctupv.js\"\nBackend Imports:\n- applicationService.jsw \\(getDriverApplications, withdrawApplication\\)\n- driverProfiles.jsw \\(getOrCreateDriverProfile, getDriverProfileViews, setDiscoverability\\)\n- driverInsightsService.jsw \\(getDriverStats\\)\n- featureAdoptionService.jsw \\(logFeatureInteraction\\)\n- messaging.jsw \\(getConversation - dynamic import\\)\n- messagingRealtime.jsw \\(getNewMessages, getUnreadCountForUser - dynamic imports\\)\n\nBridge Message Types Handled:\nINBOUND: \n  - ping\n  - dashboardReady\n  - refreshDashboard\n  - navigateToMatching\n  - withdrawApplication\n  - getConversation\n  - sendMessage\n  - markAsRead\n  - getNewMessages\n  - getUnreadCount\n  - logFeatureInteraction\n  - setDiscoverability\n  - navigateToMyCareer\n  - navigateToForums\n  - navigateToMentorship\n  - navigateToPetFriendly\n  - navigateToHealth\n\nOUTBOUND:\n  - pong\n  - dashboardData\n  - withdrawSuccess\n  - conversationData\n  - messageSent\n  - newMessagesData\n  - unreadCountData\n  - viewsData\n  - insightsData\n  - error\n\n### \"DRIVER_ANNOUNCEMENTS.jgkc4.js\"\nBackend Imports:\n- carrierAnnouncementsService.jsw \\(getAnnouncementsForDriver, markAnnouncementRead, addComment\\)\n\nBridge Message Types:\nINBOUND: driverAnnouncementsReady, getDriverAnnouncements, markAnnouncementRead, addAnnouncementComment\nOUTBOUND: driverAnnouncementsData, announcementCommentResult, driverContext\n\n### \"DRIVER_BADGES.jlfgc.js\"\nBackend Imports:\n- badgeService.jsw \\(getBadges, getBadgeDefinitions\\)\n\nBridge Message Types:\nINBOUND: badgesReady, updateFeatured, init\nOUTBOUND: achievementsData, featuredUpdated, error\n\n### \"DRIVER_DOCUMENT_UPLOAD.r5jyr.js\"\nBackend Imports:\n- onboardingWorkflowService.jsw \\(getWorkflowStatus\\)\n- documentCollectionService.jsw \\(getDocumentStatus, uploadDocument\\)\n\nBridge Message Types:\nINBOUND: documentUploadReady, requestDocumentList, uploadDocument\nOUTBOUND: initDocumentUpload, documentList, uploadResult\n\n### \"DRIVER_FORUMS.vzg3s.js\"\nBackend Imports:\n- forumService.jsw \\(getCategories, getThreadsByCategory, getThreadBySlug, getPostsByThread, createThread, createPost, likePost\\)\n\nBridge Message Types:\nINBOUND: ready, getCategories, getThreads, getPosts, getThreadBySlug, createThread, createPost, likePost\nOUTBOUND: categoriesData, threadsData, threadDetailData, threadCreated, postCreated, xpAwarded\n\n### \"DRIVER_GAMIFICATION.ik6n7.js\"\nBackend Imports:\n- gamificationService.jsw \\(getDriverProgression\\)\n- challengeService.jsw \\(getActiveChallenges, startChallenge, claimChallengeReward\\)\n- badgeService.jsw \\(getBadges\\)\n\nBridge Message Types:\nINBOUND: gamificationReady, refreshGamification, startChallenge, claimReward, viewChallenges, viewAchievements, navigateTo, ping\nOUTBOUND: gamificationData, progressionUpdate, challengeUpdate, achievementUnlocked, levelUp, streakUpdate, xpAwarded, challengeComplete, error, pong\n\n### \"DRIVER_POLICIES.mbmmh.js\"\nBackend Imports:\n- carrierPolicyService.jsw \\(getPoliciesForDriver, getPolicyContent, acknowledgePolicy\\)\n\nBridge Message Types:\nINBOUND: driverPoliciesReady, getDriverPolicies, getPolicyContent, acknowledgePolicy\nOUTBOUND: driverPoliciesData, policyContentData, policyAcknowledgeResult, driverContext\n\n### \"AI - MATCHING.rof4w.js\" \\(MOST COMPLEX\\)\nBackend Imports:\n- carrierMatching.jsw \\(findMatchingCarriers, logMatchEvent, getDriverSavedCarriers\\)\n- asyncSearchService.jsw \\(triggerSemanticSearch, checkSearchStatus, triggerEnrichmentJob, checkEnrichmentStatus\\)\n- mutualInterestService.jsw \\(getMutualInterestForDriver\\)\n- aiEnrichment.jsw \\(enrichCarrier\\)\n- driverProfiles.jsw \\(getOrCreateDriverProfile, setDiscoverability, getDriverInterests, updateDriverDocuments\\)\n- applicationService.jsw \\(submitApplication, getDriverApplications\\)\n- ocrService.jsw \\(extractDocumentForAutoFill\\)\n- matchExplanationService.jsw \\(getMatchExplanationForDriver\\)\n- featureAdoptionService.jsw \\(logFeatureInteraction\\)\n- agentService.jsw \\(handleAgentTurn, resumeAfterApproval\\)\n- voiceService.jsw \\(getVoiceConfig\\)\n\nBridge Message Types:\nINBOUND: carrierMatchingReady, findMatches, logInterest, retryEnrichment, navigateToSignup, navigateToLogin, \n         checkUserStatus, getDriverProfile, navigateToSavedCarriers, submitApplication, saveProfileDocs, \n         extractDocumentOCR, getMatchExplanation, logFeatureInteraction, getDriverApplications, \n         getMutualInterest, loginForApplication, agentMessage, resolveApprovalGate, startVoiceCall, \n         endVoiceCall, getVoiceConfig, pollSearchJob, ping\n\nOUTBOUND: pageReady, matchResults, matchError, enrichmentUpdate, enrichmentComplete, interestLogged,\n         userStatusUpdate, loginSuccess, loginCancelled, applicationSubmitted, driverProfileLoaded,\n         savedCarriersLoaded, discoverabilityUpdated, profileSaved, ocrResult, matchExplanation,\n         driverApplications, mutualInterestData, agentResponse, agentTyping, agentToolResult,\n         agentApprovalRequired, voiceReady, searchJobStarted, searchJobStatus, pong\n\n## 6. BRIDGE PATTERNS BY ARCHITECTURE\n\n### Pattern 1: { action, payload } \\(DRIVER_FORUMS.vzg3s.js\\)\n- Sender: window.parent.postMessage\\({ type, payload }\\)\n- Receiver: Switch on msg.type, extract msg.payload\n- Response: component.postMessage\\({ type, payload }\\)\n- Used by: DRIVER_FORUMS, others\n\n### Pattern 2: { type, data } \\(DRIVER_DASHBOARD, most others\\)\n- Sender: window.parent.postMessage\\({ type, data }\\)\n- Receiver: Switch on msg.type, extract msg.data\n- Response: component.postMessage\\({ type, data }\\)\n- Used by: DRIVER_DASHBOARD, DRIVER_ANNOUNCEMENTS, DRIVER_BADGES, DRIVER_POLICIES, DRIVER_GAMIFICATION, etc.\n\n### Pattern 3: Callback-based \\(ai-matching-bridge.js\\)\n- Uses window.addEventListener\\('message', handler\\)\n- Routes via window._handleSearchJobStarted, window._handleSearchJobStatus \\(dispatcher pattern\\)\n- Validates origin \\(window.parent === source\\)\n- Validates schema \\(msg.type, msg.data\\)\n\n## 7. DRIVER-SPECIFIC vs SHARED BACKEND SERVICES\n\n### DRIVER-SPECIFIC SERVICES \\(15\\):\n1. driverProfiles.jsw - Driver profile CRUD & discovery\n2. driverInsightsService.jsw - Driver stats/analytics\n3. driverMatching.jsw - Driver matching logic\n4. driverCockpitService.jsw - Driver cockpit views\n5. driverFinancialService.jsw - Driver earnings tracking\n6. driverLifecycleService.jsw - Driver lifecycle stages\n7. driverOutreach.jsw - Driver outreach campaigns\n8. driverProfileService.jsw - Profile management\n9. driverScorecardService.jsw - Driver scoring\n10. matchExplanationService.jsw - \"Why You Matched\" rationale\n11. petFriendlyService.jsw - Pet-friendly location data\n12. healthService.jsw - Trucker health content\n13. retained in Wave 4 imports from driver pages only\n\n### SHARED SERVICES USED BY DRIVER PAGES \\(30+\\):\nData & Matching:\n- carrierMatching.jsw - Carrier matching engine \\(also used by admin/recruiter\\)\n- applicationService.jsw - Applications \\(driver submit, recruiter review\\)\n- mutualInterestService.jsw - Mutual interest tracking\n- asyncSearchService.jsw - Async search/enrichment jobs\n- ocrService.jsw - Document OCR extraction\n\nContent & Communication:\n- carrierAnnouncementsService.jsw - Announcements feed\n- carrierPolicyService.jsw - Carrier policy management\n- forumService.jsw - Community forums \\(driver-facing\\)\n- messagingRealtime.jsw - Realtime messaging\n- messaging.jsw - Message history\n- documentCollectionService.jsw - Document management\n- onboardingWorkflowService.jsw - Onboarding workflows\n\nGamification & Engagement:\n- gamificationService.jsw - Gamification progression \\(driver-specific\\)\n- challengeService.jsw - Challenges \\(driver & recruiter\\)\n- badgeService.jsw - Badge achievement system\n- featureAdoptionService.jsw - Feature usage tracking\n- recruitmentChallengesService.jsw - Challenges for recruitment\n\nAI & Intelligence:\n- aiEnrichment.jsw - AI enrichment for carriers\n- aiRouterService.jsw - AI provider routing\n- agentService.jsw - Agent orchestration \\(all roles\\)\n- voiceService.jsw - VAPI voice calling\n\n## 8. MESSAGE FLOW SUMMARY\n\nAll driver pages use **postMessage bridge pattern** connecting:\n\n```\nHTML Component \\(iframe\\)\n     ↓ \\(window.parent.postMessage\\)\nPage Code \\($w.onReady + onMessage listener\\)\n     ↓ \\(backend imports\\)\nBackend Services \\(.jsw files\\)\n     ↓ \\(dual-source routing: Airtable or Wix\\)\nAirtable Collections or Wix Data Collections\n```\n\n## 9. CRITICAL PATTERNS\n\n1. **Auto-discovery**: All pages try multiple HTML IDs \\(#html1-5, #htmlEmbed1\\) to find component\n2. **Safe send**: All outbound messages wrapped in try-catch\n3. **Message validation**: Both INBOUND and OUTBOUND registries prevent misspellings\n4. **Polling**: Driver Dashboard uses smart polling with exponential backoff\n5. **Dynamic imports**: AI Matching uses dynamic imports for messaging services\n6. **Agent integration**: AI Matching wired for agent chat + voice + approval gates\n7. **Async operations**: Enrichment, OCR, search jobs tracked via status polling\n\n## 10. DATA ROUTING \\(Dual-Source\\)\n\nDriver profile data routes via:\n- driverProfiles.jsw → Airtable \\(driverProfiles collection key → v2_Driver Profiles table\\)\n- applicationService.jsw → Airtable \\(driverCarrierInterests → v2_Driver Carrier Interests\\)\n- messagingRealtime.jsw → Airtable \\(messages collection\\)\n- badgeService.jsw → Airtable \\(badges, achievements\\)\n- gamificationService.jsw → Airtable \\(gamification_progressions, challenges, etc.\\)\n\nAuthentication-only in Wix:\n- AdminUsers \\(admin users only, not drivers\\)\n- MemberNotifications \\(Wix member system\\)\n\nEOF\ncat /tmp/driver_map_summary.txt)"
    ]
  },
  "enableAllProjectMcpServers": true,
  "enabledMcpjsonServers": [
    "wix-mcp-remote",
    "stripe",
    "memory",
    "airtable",
    "notionApi"
  ],
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "powershell -NoProfile -ExecutionPolicy Bypass -File .claude/hooks/prepare-test-env.ps1"
          },
          {
            "type": "command",
            "command": "powershell -NoProfile -ExecutionPolicy Bypass -File .claude/hooks/sync-wix-cli-version.ps1"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "powershell -NoProfile -ExecutionPolicy Bypass -File .claude/hooks/cleanup-test-env.ps1"
          },
          {
            "type": "command",
            "command": "powershell -NoProfile -ExecutionPolicy Bypass -File .claude/hooks/protect-package-files.ps1"
          }
        ]
      }
    ]
  }
}
